{"version":3,"sources":["webpack:///static/js/22.6fef0911d10bd11497bb.js","webpack:///./src/pages/user/register.vue","webpack:///src/pages/user/register.vue","webpack:///./src/pages/user/register.vue?848b","webpack:///./src/pages/user/register.vue?d217","webpack:///./src/pages/user/register.vue?2dac"],"names":["webpackJsonp","Iwgb","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","is_integer","is_integer_default","n","userApi","user_register","data","checkPhone","rule","callback","Error","setTimeout","length","ruleForm","pass","code","phone","rules","validator","trigger","codeText","disabled","timer","methods","register","formName","_this","this","$refs","validate","valid","console","log","_ruleForm","then","obj","$message","showClose","message","type","$router","push","sendCode","_this2","setInterval","parseInt","clearInterval","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","status-icon","size","prop","placeholder","$$v","$set","_n","expression","auto-complete","on","click","_s","$event","staticRenderFns","esExports","pages_user_register","normalizeComponent","__vue_styles__","Component","Wpha","exports","content","i","locals","dQPO","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/22.6fef0911d10bd11497bb.js","sourcesContent":["webpackJsonp([22],{\n\n/***/ \"Iwgb\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/number/is-integer.js\nvar is_integer = __webpack_require__(\"RRo+\");\nvar is_integer_default = /*#__PURE__*/__webpack_require__.n(is_integer);\n\n// EXTERNAL MODULE: ./src/common/javascript/userApi.js + 1 modules\nvar userApi = __webpack_require__(\"pN2o\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/pages/user/register.vue\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var user_register = ({\n  data: function data() {\n    var checkPhone = function checkPhone(rule, value, callback) {\n      if (!value) {\n        return callback(new Error('手机号不能为空'));\n      }\n      setTimeout(function () {\n        if (!is_integer_default()(value)) {\n          callback(new Error('请输入数字值'));\n        } else {\n          if (('' + value).length !== 11) {\n            callback(new Error('请输入正确的手机号'));\n          } else {\n            callback();\n          }\n        }\n      }, 100);\n    };\n    var validatePass = function validatePass(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        callback();\n      }\n    };\n    var validateCode = function validateCode(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入验证码'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      ruleForm: {\n        pass: '',\n        code: '',\n        phone: ''\n      },\n      rules: {\n        pass: [{ validator: validatePass, trigger: 'blur' }],\n        code: [{ validator: validateCode, trigger: 'blur' }],\n        phone: [{ validator: checkPhone, trigger: 'blur' }]\n      },\n      codeText: '获取验证码',\n      disabled: false,\n      timer: null\n    };\n  },\n\n  methods: {\n    register: function register(formName) {\n      var _this = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          var _ruleForm = _this.ruleForm,\n              pass = _ruleForm.pass,\n              code = _ruleForm.code,\n              phone = _ruleForm.phone;\n\n          Object(userApi[\"n\" /* _register */])(phone, pass, code).then(function (obj) {\n            if (obj.code === 1) {\n              _this.$message({\n                showClose: true,\n                message: '注册成功，请登录',\n                type: 'success'\n              });\n              _this.$router.push('/login');\n            } else if (obj.code === 603) {\n              _this.$message({\n                showClose: true,\n                message: '该手机号已注册，请登录',\n                type: 'error'\n              });\n              _this.$router.push('/login');\n            } else {\n              _this.$message({\n                showClose: true,\n                message: '注册失败，请稍后再试',\n                type: 'error'\n              });\n            }\n          });\n        } else {\n          console.log('error submit');\n          return false;\n        }\n      });\n    },\n    sendCode: function sendCode() {\n      var _this2 = this;\n\n      var phone = this.ruleForm.phone;\n      if (is_integer_default()(phone) && ('' + phone).length === 11) {\n        // 发送验证码\n        this.disabled = true;\n        Object(userApi[\"p\" /* _sendCode */])(phone).then(function (obj) {\n          if (obj.code === 1) {\n            _this2.$message({\n              showClose: true,\n              message: '已发送',\n              type: 'success'\n            });\n            _this2.codeText = '60\\u79D2';\n            _this2.disabled = true;\n            _this2.timer = setInterval(function () {\n              _this2.codeText = parseInt(_this2.codeText) - 1;\n              if (_this2.codeText === 0) {\n                _this2.codeText = '获取验证码';\n                _this2.disabled = false;\n                clearInterval(_this2.timer);\n              } else {\n                _this2.codeText = _this2.codeText + '\\u79D2';\n              }\n            }, 1000);\n          } else {\n            _this2.$message({\n              showClose: true,\n              message: '发送失败',\n              type: 'error'\n            });\n            _this2.disabled = false;\n          }\n        });\n      }\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0dd581a0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/user/register.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"register\"},[_c('div',{staticClass:\"form\"},[_c('div',{staticClass:\"formHead\"},[_vm._v(\"注册\")]),_vm._v(\" \"),_c('el-form',{ref:\"ruleForm\",staticClass:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"placeholder\":\"手机号\"},model:{value:(_vm.ruleForm.phone),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"phone\", _vm._n($$v))},expression:\"ruleForm.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"pass\"}},[_c('el-input',{attrs:{\"placeholder\":\"密码\",\"type\":\"password\",\"auto-complete\":\"off\"},model:{value:(_vm.ruleForm.pass),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"pass\", $$v)},expression:\"ruleForm.pass\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"codeProp\",attrs:{\"prop\":\"code\"}},[_c('el-input',{staticClass:\"setCode\",attrs:{\"placeholder\":\"验证码\",\"type\":\"text\",\"auto-complete\":\"off\"},model:{value:(_vm.ruleForm.code),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"code\", $$v)},expression:\"ruleForm.code\"}}),_vm._v(\" \"),_c('el-button',{staticClass:\"getCode\",attrs:{\"disabled\":_vm.disabled,\"type\":\"primary\"},on:{\"click\":_vm.sendCode}},[_vm._v(_vm._s(_vm.codeText))])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.register('ruleForm')}}},[_vm._v(\"注册\")])],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var pages_user_register = (esExports);\n// CONCATENATED MODULE: ./src/pages/user/register.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"Wpha\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0dd581a0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  user_register,\n  pages_user_register,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_pages_user_register = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"Wpha\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"dQPO\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"rjj0\")(\"7fdb1f99\", content, true);\n\n/***/ }),\n\n/***/ \"dQPO\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.register[data-v-0dd581a0] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  min-height: 620px;\\n}\\n.register .form[data-v-0dd581a0] {\\n    width: 25%;\\n    margin: auto;\\n    padding: 20px;\\n    border-radius: 5px;\\n    background: #fff;\\n    min-width: 350px;\\n    max-width: 400px;\\n}\\n.register .form .formHead[data-v-0dd581a0] {\\n      text-align: center;\\n      margin: 10px;\\n      font-size: 20px;\\n}\\n.register .form .ruleForm[data-v-0dd581a0] {\\n      text-align: center;\\n}\\n.register .form .ruleForm .codeProp .setCode[data-v-0dd581a0] {\\n        width: 60%;\\n        float: left;\\n}\\n.register .form .ruleForm .codeProp .getCode[data-v-0dd581a0] {\\n        width: 30%;\\n        float: right;\\n}\\n.register .form .ruleForm .submit[data-v-0dd581a0] {\\n        width: 100%;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"G:/WebstormProjects/Vue/chihuobao/src/pages/user/register.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,kBAAkB;CACnB;AACD;IACI,WAAW;IACX,aAAa;IACb,cAAc;IACd,mBAAmB;IACnB,iBAAiB;IACjB,iBAAiB;IACjB,iBAAiB;CACpB;AACD;MACM,mBAAmB;MACnB,aAAa;MACb,gBAAgB;CACrB;AACD;MACM,mBAAmB;CACxB;AACD;QACQ,WAAW;QACX,YAAY;CACnB;AACD;QACQ,WAAW;QACX,aAAa;CACpB;AACD;QACQ,YAAY;CACnB\",\"file\":\"register.vue\",\"sourcesContent\":[\"\\n.register[data-v-0dd581a0] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  min-height: 620px;\\n}\\n.register .form[data-v-0dd581a0] {\\n    width: 25%;\\n    margin: auto;\\n    padding: 20px;\\n    border-radius: 5px;\\n    background: #fff;\\n    min-width: 350px;\\n    max-width: 400px;\\n}\\n.register .form .formHead[data-v-0dd581a0] {\\n      text-align: center;\\n      margin: 10px;\\n      font-size: 20px;\\n}\\n.register .form .ruleForm[data-v-0dd581a0] {\\n      text-align: center;\\n}\\n.register .form .ruleForm .codeProp .setCode[data-v-0dd581a0] {\\n        width: 60%;\\n        float: left;\\n}\\n.register .form .ruleForm .codeProp .getCode[data-v-0dd581a0] {\\n        width: 30%;\\n        float: right;\\n}\\n.register .form .ruleForm .submit[data-v-0dd581a0] {\\n        width: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/22.6fef0911d10bd11497bb.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0dd581a0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./register.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./register.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0dd581a0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./register.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0dd581a0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/user/register.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class='register'>\r\n    <div class=\"form\">\r\n      <div class=\"formHead\">注册</div>\r\n      <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" size='small' ref=\"ruleForm\" class=\"ruleForm\">\r\n        <el-form-item prop=\"phone\">\r\n          <el-input placeholder=\"手机号\" v-model.number=\"ruleForm.phone\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"pass\">\r\n          <el-input placeholder=\"密码\" type=\"password\" v-model=\"ruleForm.pass\" auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"code\" class='codeProp'>\r\n          <el-input class='setCode' placeholder=\"验证码\" type=\"text\" v-model=\"ruleForm.code\" auto-complete=\"off\"></el-input>\r\n          <el-button class='getCode' :disabled='disabled' type=\"primary\" @click=\"sendCode\">{{codeText}}</el-button>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button class='submit' type=\"primary\" @click=\"register('ruleForm')\">注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { _sendCode, _register } from 'common/javascript/userApi'\r\n\r\nexport default {\r\n  data () {\r\n    var checkPhone = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error('手机号不能为空'))\r\n      }\r\n      setTimeout(() => {\r\n        if (!Number.isInteger(value)) {\r\n          callback(new Error('请输入数字值'))\r\n        } else {\r\n          if (`${value}`.length !== 11) {\r\n            callback(new Error('请输入正确的手机号'))\r\n          } else {\r\n            callback()\r\n          }\r\n        }\r\n      }, 100)\r\n    }\r\n    var validatePass = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请输入密码'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    var validateCode = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请输入验证码'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      ruleForm: {\r\n        pass: '',\r\n        code: '',\r\n        phone: ''\r\n      },\r\n      rules: {\r\n        pass: [\r\n          { validator: validatePass, trigger: 'blur' }\r\n        ],\r\n        code: [\r\n          { validator: validateCode, trigger: 'blur' }\r\n        ],\r\n        phone: [\r\n          { validator: checkPhone, trigger: 'blur' }\r\n        ]\r\n      },\r\n      codeText: '获取验证码',\r\n      disabled: false,\r\n      timer: null\r\n    }\r\n  },\r\n  methods: {\r\n    register (formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          const { pass, code, phone } = this.ruleForm\r\n          _register(phone, pass, code).then(obj => {\r\n            if (obj.code === 1) {\r\n              this.$message({\r\n                showClose: true,\r\n                message: '注册成功，请登录',\r\n                type: 'success'\r\n              })\r\n              this.$router.push('/login')\r\n            } else if (obj.code === 603) {\r\n              this.$message({\r\n                showClose: true,\r\n                message: '该手机号已注册，请登录',\r\n                type: 'error'\r\n              })\r\n              this.$router.push('/login')\r\n            } else {\r\n              this.$message({\r\n                showClose: true,\r\n                message: '注册失败，请稍后再试',\r\n                type: 'error'\r\n              })\r\n            }\r\n          })\r\n        } else {\r\n          console.log('error submit')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    sendCode () {\r\n      const phone = this.ruleForm.phone\r\n      if (Number.isInteger(phone) && `${phone}`.length === 11) {\r\n        // 发送验证码\r\n        this.disabled = true\r\n        _sendCode(phone).then(obj => {\r\n          if (obj.code === 1) {\r\n            this.$message({\r\n              showClose: true,\r\n              message: '已发送',\r\n              type: 'success'\r\n            })\r\n            this.codeText = `60秒`\r\n            this.disabled = true\r\n            this.timer = setInterval(() => {\r\n              this.codeText = parseInt(this.codeText) - 1\r\n              if (this.codeText === 0) {\r\n                this.codeText = '获取验证码'\r\n                this.disabled = false\r\n                clearInterval(this.timer)\r\n              } else {\r\n                this.codeText = `${this.codeText}秒`\r\n              }\r\n            }, 1000)\r\n          } else {\r\n            this.$message({\r\n              showClose: true,\r\n              message: '发送失败',\r\n              type: 'error'\r\n            })\r\n            this.disabled = false\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='sass'>\r\n.register\r\n  display: flex\r\n  min-height: 620px\r\n  .form\r\n    width: 25%\r\n    margin: auto\r\n    padding: 20px\r\n    border-radius: 5px\r\n    background: #fff\r\n    min-width: 350px\r\n    max-width: 400px\r\n    .formHead\r\n      text-align: center\r\n      margin: 10px\r\n      font-size: 20px\r\n    .ruleForm\r\n      text-align: center\r\n      .codeProp\r\n        .setCode\r\n          width: 60%\r\n          float: left\r\n        .getCode\r\n          width: 30%\r\n          float: right\r\n      .submit\r\n        width: 100%\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/user/register.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"register\"},[_c('div',{staticClass:\"form\"},[_c('div',{staticClass:\"formHead\"},[_vm._v(\"注册\")]),_vm._v(\" \"),_c('el-form',{ref:\"ruleForm\",staticClass:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"placeholder\":\"手机号\"},model:{value:(_vm.ruleForm.phone),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"phone\", _vm._n($$v))},expression:\"ruleForm.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"pass\"}},[_c('el-input',{attrs:{\"placeholder\":\"密码\",\"type\":\"password\",\"auto-complete\":\"off\"},model:{value:(_vm.ruleForm.pass),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"pass\", $$v)},expression:\"ruleForm.pass\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"codeProp\",attrs:{\"prop\":\"code\"}},[_c('el-input',{staticClass:\"setCode\",attrs:{\"placeholder\":\"验证码\",\"type\":\"text\",\"auto-complete\":\"off\"},model:{value:(_vm.ruleForm.code),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"code\", $$v)},expression:\"ruleForm.code\"}}),_vm._v(\" \"),_c('el-button',{staticClass:\"getCode\",attrs:{\"disabled\":_vm.disabled,\"type\":\"primary\"},on:{\"click\":_vm.sendCode}},[_vm._v(_vm._s(_vm.codeText))])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.register('ruleForm')}}},[_vm._v(\"注册\")])],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0dd581a0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/user/register.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0dd581a0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./register.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"7fdb1f99\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0dd581a0\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"indentedSyntax\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/user/register.vue\n// module id = Wpha\n// module chunks = 22","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.register[data-v-0dd581a0] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  min-height: 620px;\\n}\\n.register .form[data-v-0dd581a0] {\\n    width: 25%;\\n    margin: auto;\\n    padding: 20px;\\n    border-radius: 5px;\\n    background: #fff;\\n    min-width: 350px;\\n    max-width: 400px;\\n}\\n.register .form .formHead[data-v-0dd581a0] {\\n      text-align: center;\\n      margin: 10px;\\n      font-size: 20px;\\n}\\n.register .form .ruleForm[data-v-0dd581a0] {\\n      text-align: center;\\n}\\n.register .form .ruleForm .codeProp .setCode[data-v-0dd581a0] {\\n        width: 60%;\\n        float: left;\\n}\\n.register .form .ruleForm .codeProp .getCode[data-v-0dd581a0] {\\n        width: 30%;\\n        float: right;\\n}\\n.register .form .ruleForm .submit[data-v-0dd581a0] {\\n        width: 100%;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"G:/WebstormProjects/Vue/chihuobao/src/pages/user/register.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,kBAAkB;CACnB;AACD;IACI,WAAW;IACX,aAAa;IACb,cAAc;IACd,mBAAmB;IACnB,iBAAiB;IACjB,iBAAiB;IACjB,iBAAiB;CACpB;AACD;MACM,mBAAmB;MACnB,aAAa;MACb,gBAAgB;CACrB;AACD;MACM,mBAAmB;CACxB;AACD;QACQ,WAAW;QACX,YAAY;CACnB;AACD;QACQ,WAAW;QACX,aAAa;CACpB;AACD;QACQ,YAAY;CACnB\",\"file\":\"register.vue\",\"sourcesContent\":[\"\\n.register[data-v-0dd581a0] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  min-height: 620px;\\n}\\n.register .form[data-v-0dd581a0] {\\n    width: 25%;\\n    margin: auto;\\n    padding: 20px;\\n    border-radius: 5px;\\n    background: #fff;\\n    min-width: 350px;\\n    max-width: 400px;\\n}\\n.register .form .formHead[data-v-0dd581a0] {\\n      text-align: center;\\n      margin: 10px;\\n      font-size: 20px;\\n}\\n.register .form .ruleForm[data-v-0dd581a0] {\\n      text-align: center;\\n}\\n.register .form .ruleForm .codeProp .setCode[data-v-0dd581a0] {\\n        width: 60%;\\n        float: left;\\n}\\n.register .form .ruleForm .codeProp .getCode[data-v-0dd581a0] {\\n        width: 30%;\\n        float: right;\\n}\\n.register .form .ruleForm .submit[data-v-0dd581a0] {\\n        width: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0dd581a0\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"indentedSyntax\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/user/register.vue\n// module id = dQPO\n// module chunks = 22"],"sourceRoot":""}
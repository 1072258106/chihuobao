webpackJsonp([25],{JbFJ:function(e,a,t){var r=t("l6tX");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("rjj0")("eb490dd2",r,!0)},QQOC:function(e,a,t){"use strict";function r(e){t("JbFJ")}Object.defineProperty(a,"__esModule",{value:!0});var l=t("Dd8w"),o=t.n(l),s=t("NYxO"),i=t("pN2o"),n=t("OOMk"),p=n.a.user.upload,d={data:function(){return{logoUrl:"",imgUrl:"",cardPic:"",TRUE:"",uploadUrl:p,longitude:"",latitude:"",validateForm:{abstract:"",name:"",type:[],address:"",cardId:""}}},computed:o()({},Object(s.c)("user",["cityOptions","suggestionsList","userInfo","shopTypeList"]),{types:function(){return this.shopTypeList.map(function(e){return{label:e.shopType,value:e.shopTypeCode}})}}),created:function(){this.initCity()},methods:{submitForm:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if(!a.imgUrl||!a.logoUrl)return a.$message({type:"error",message:"请上传图片"}),!1;var t=a.logoUrl,r=a.imgUrl,l=a.cardPic,o=a.longitude,s=a.latitude,n=a.userInfo.userId,p=a.validateForm,d=p.name,c=p.abstract,u=p.cardId,m=p.type,f=p.address;Object(i.a)(n,d,c,u,m,f,t,l,r,o,s).then(function(e){1===e.code?a.$message({type:"success",message:"已提交申请!"}):a.$message({type:"error",message:"操作失败"})})})},logoSuccess:function(e,a){this.logoUrl=e.data.imageUrl},img1Success:function(e,a){this.imgUrl=e.data.imageUrl},cardPicSuccess:function(e,a){this.cardPic=e.data.imageUrl},beforeAvatarUpload:function(e){var a="image/jpeg"===e.type||"image/png"||"image/gif",t=e.size/1024/1024<5;return a||this.$message.error("上传图片只能是 JPG 格式!"),t||this.$message.error("上传图片大小不能超过 5MB!"),a&&t},initCity:function(){var e=this;Object(i.j)().then(function(a){e.longitude=a.point.x,e.latitude=a.point.y})}}},c=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"applyShop"},[t("p",{staticClass:"title"},[e._v("店铺申请")]),e._v(" "),t("el-form",{ref:"validateForm",staticClass:"demo-ruleForm _el-form",attrs:{model:e.validateForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"店铺名称",prop:"name",rules:[{required:!0,message:"名称不能为空"}]}},[t("el-input",{attrs:{type:"name","auto-complete":"off"},model:{value:e.validateForm.name,callback:function(a){e.$set(e.validateForm,"name",a)},expression:"validateForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"简介",prop:"abstract",rules:[{required:!0,message:"联系人不能为空"}]}},[t("el-input",{attrs:{type:"abstract","auto-complete":"off"},model:{value:e.validateForm.abstract,callback:function(a){e.$set(e.validateForm,"abstract",a)},expression:"validateForm.abstract"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"身份证",prop:"cardId",rules:[{required:!0,message:"身份证不能为空"}]}},[t("el-input",{attrs:{type:"userId","auto-complete":"off"},model:{value:e.validateForm.cardId,callback:function(a){e.$set(e.validateForm,"cardId",a)},expression:"validateForm.cardId"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"类型",prop:"type",rules:[{required:!0,message:"类型不能为空"}]}},[t("el-select",{attrs:{placeholder:"请选择商铺类型"},model:{value:e.validateForm.type,callback:function(a){e.$set(e.validateForm,"type",a)},expression:"validateForm.type"}},e._l(e.types,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"地址",prop:"address",rules:[{required:!0,message:"地址不能为空"}]}},[t("el-input",{attrs:{type:"address","auto-complete":"off"},model:{value:e.validateForm.address,callback:function(a){e.$set(e.validateForm,"address",a)},expression:"validateForm.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"logo",prop:"logoUrl"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,name:"image","with-credentials":e.TRUE,"show-file-list":!1,drag:!0,"on-success":e.logoSuccess,"before-upload":e.beforeAvatarUpload}},[e.logoUrl?t("img",{staticClass:"avatar",attrs:{src:e.logoUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"身份证照片",prop:"cardPic"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,name:"image","with-credentials":e.TRUE,"show-file-list":!1,drag:!0,"on-success":e.cardPicSuccess,"before-upload":e.beforeAvatarUpload}},[e.cardPic?t("img",{staticClass:"avatar",attrs:{src:e.cardPic}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"商铺照片",prop:"imgUrl"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,name:"image","with-credentials":e.TRUE,"show-file-list":!1,drag:!0,"on-success":e.img1Success,"before-upload":e.beforeAvatarUpload}},[e.imgUrl?t("img",{staticClass:"avatar",attrs:{src:e.imgUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.submitForm("validateForm")}}},[e._v("提交")])],1)],1)],1)},u=[],m={render:c,staticRenderFns:u},f=m,g=t("VU/8"),v=r,b=g(d,f,!1,v,null,null);a.default=b.exports},l6tX:function(e,a,t){a=e.exports=t("FZ+f")(!1),a.push([e.i,"\n.applyShop {\n  background: #fff;\n  padding-bottom: 20px;\n}\n.applyShop .title {\n    font-size: 20px;\n    text-align: center;\n    font-weight: 600;\n    padding: 30px;\n}\n.applyShop .el-form._el-form {\n    margin: 30px auto 0;\n    width: 60%;\n}\n.applyShop .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n.applyShop .avatar-uploader .el-upload:hover {\n      border-color: #409EFF;\n}\n.applyShop .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n}\n.applyShop .avatar {\n    height: 178px;\n    display: block;\n}\n.applyShop .el-input-group__prepend {\n    padding: 0;\n    border: none;\n}\n.applyShop .el-input-group__prepend .el-cascader {\n      width: 150px;\n}\n",""])}});